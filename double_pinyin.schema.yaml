# Rime schema
# encoding: utf-8

schema:
  schema_id: double_pinyin
  name: è‡ªç„¶ç +å¤šè¯­æ··åˆ
  version: "0.1"
  author:
    - ä½›æŒ¯ <chen.sst@gmail.com>
    - Shiroko <hhx.xxm@gmail.com>
  description: |
    æœ™æœˆæ‹¼éŸ³ï¼‹è‡ªç„¶ç¢¼é›™æ‹¼æ–¹æ¡ˆï¼Œå¸¦æ—¥è‹±ã€LaTeXç­‰æ··åˆè¾“å…¥ã€‚
  dependencies:
    - easy_en
    - zrm_lookup
    # - luna_pinyin
    - japanese
    - latex
    - &symbol symbols

switches:
  - name: ascii_mode
    reset: 0
    states: [ä¸­, è‹±]
  - name: full_shape
    states: [åŠ, å…¨]
  - name: simplification
    reset: 1
    states: [æ¼¢, æ±‰]
  - name: ascii_punct
    states: [ã€‚ï¼Œ, ï¼ï¼Œ]
  - name: _hide_comment
    reset: 1
  - name: emoji_suggestion
    reset: 0
    states: ["ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F"]

engine:
  processors:
    - lua_processor@select_character_processor
    - lua_processor@baidu_processor
    - lua_processor@c2e_processor
    - lua_processor@e2c_processor
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@latex
    - affix_segmentor@zrm_lookup
    - affix_segmentor@symbol
    - punct_segmentor
    - fallback_segmentor
  translators:
    - lua_translator@number_translator
    - punct_translator
    - reverse_lookup_translator
    - script_translator
    - table_translator@easy_en
    - table_translator@jpn
    - table_translator@latex
    - table_translator@zrm_lookup
    - table_translator@symbol
    - lua_translator@date_translator
    - lua_translator@baidu_translator
    - lua_translator@c2e_translator
    - lua_translator@e2c_translator
  filters:
    - simplifier
    - simplifier@emoji_suggestion
    - uniquifier
    # - lua_filter@easy_en_enhance_filter

speller:
  alphabet: "abcdefghijklmnopqrstuvwxyz;=+-*/()."
  initials: "abcdefghijklmnopqrstuvwxyz="
  delimiter: " '"
  algebra:
    # ang -> aang, ong -> oong, eng -> eeng
    - xform/^([aoe])ng/$1$1ng/
    - xform/([^;])iu/$1Q/
    - xform/([^;])[uv]e/$1T/
    - xform/ing|uai/Y/
    - xform/^sh/U/
    - xform/^ch/I/
    - xform/^zh/V/
    - xform/([^;])uo/$1O/
    - xform/([^;])[uv]n/$1P/
    - xform/i?ong/S/
    - xform/[iu]ang/D/
    - xform/(.)eng/$1G/
    - xform/(.)ang/$1H/
    - xform/([^;])en/$1F/
    - xform/[uv]an/R/
    - xform/ian/M/
    - xform/([^;])an/$1J/
    - xform/iao/C/
    - xform/([^;])[iu]a/$1W/
    - xform/([^;])ao/$1K/
    - xform/([^;])ai/$1L/
    - xform/([^;])ei/$1Z/
    - xform/([^;])ie/$1X/
    - xform/([^;])ui/$1V/
    - xform/([^;])ou/$1B/
    - xform/([^;])in/$1N/
    - xform/^a(;|$)/AA$1/
    - xform/^o(;|$)/OO$1/
    - xform/^e(;|$)/EE$1/
    - xlit/QWERTYUIOPASDFGHMJCKLZXVBN/qwertyuiopasdfghmjcklzxvbn/
    # - derive/^(..).*$/$1/
    # - derive/^(...).*$/$1/
    - derive/^(\w*);(\w)(\w)$/$1;$2$3/
    - derive/^(\w*);(\w)(\w)$/$1;$2/
    - derive/^(\w*);(\w)(\w)$/$1/
    ## ä¸‹é¢è¿™ä¸ªå¼€èµ·æ¥ä¼šéå¸¸å¡
    ## - abbrev/^(.).+$/$1/
    - abbrev/^(.{2});+$/$1/

translator:
  dictionary: zrm_pinyin.ext
  prism: zrm_pinyin.ext
  user_dict: zrm_pinyin
  enable_user_dict: true

easy_en:
  dictionary: easy_en
  enable_completion: true
  enable_sentence: false
  initial_quality: -90
  split_sentence: false
  # use_wordninja_rs: true
  # wordninja_rs_path: "/home/shiroko/.cargo/bin/wordninja"
  # use_wordninja_rs_lua_module: false
  # wordninja_rs_lua_module_path: "C:/Users/Shiroko/AppData/Roaming/Rime/wordninja_rs_lua54.dll"

jpn:
  dictionary: japanese
  enable_completion: true
  enable_sentence: true
  initial_quality: -30

latex:
  tag: latex
  prefix: '\'
  suffix: ";"
  tips: ã€”LaTeXã€•
  closing_tips: ã€”è‡ªç„¶ç ã€•
  dictionary: latex
  prism: latex_symbols
  auto_select: true
  enable_completion: true
  enable_encoder: false
  enable_sentence: false
  enable_user_dict: false
  encode_commit_history: false
  comment_format:
    - xform/\^/\\^/
    - xform/_/\\_/

zrm_lookup:
  tag: zrm_lookup
  dictionary: zrm_lookup
  enable_completion: true
  enable_encoder: false
  enable_sentence: false
  enable_user_dict: false
  encode_commit_history: false
  prefix: "`z"
  suffix: "'"
  tips: ã€”è‡ªç„¶ç æŸ¥è¯¢ã€•

symbol:
  tag: symbol
  prefix: "/"
  suffix: ";"
  tips: ã€”ç¬¦å·ã€•
  closing_tips: ã€”è‡ªç„¶ç ã€•
  dictionary: *symbol
  prism: *symbol
  enable_completion: true
  enable_encoder: false
  enable_sentence: true
  enable_user_dict: false
  encode_commit_history: false
  comment_format:
    - xform/[!"':]+/:/

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    - { when: always, accept: "Control+Shift+E", toggle: emoji_suggestion }
  select_first_character: "comma"
  select_last_character: "period"
  select_character_only_for_initial: "abcdefghijklmnopqrstuvwxyz"

recognizer:
  import_preset: default
  patterns:
    # punct: "^/([A-Z|a-z]*|[0-9]|10)$"
    punct: null
    latex: \\[a-z0-9A-Z^-_\\><\+=\(\)\[\]]+;?
    zrm_lookup: "`z[a-z,.]*'?$"
    symbol: /[a-z0-9?']+;?
    jsq: "^=[^;']+$"

emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: none

grammar:
  language: zh-hans-t-essay-bgw

translator/contextual_suggestions: true
translator/max_homophones: 7
translator/max_homographs: 7
